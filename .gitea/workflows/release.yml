name: Release Workflow
on:
  workflow_dispatch:
    inputs:
      type:
        description: "Release Type"
        required: true
        type: choice
        options:
          - Patch
          - Minor
          - Major

env:
  ref: refs/heads/temp
jobs:
  Release:
    runs-on: ubuntu-latest
    container:
      image: node:latest
    if: github.event_name == 'workflow_dispatch' && github.ref == 'refs/heads/temp'
    steps:
      - name: Checkout
        uses: tiagomta/checkout@v1
        with:
          ref: ${{ env.ref }}
          token: ${{ secrets.TOKEN }}
      - name: Test
        uses: tiagomta/nodejs-run@v1
        with:
          target: inline
          run: |
            git.config("--global user.name devops@vistta.org");
            console.log(npm.version("${{ inputs.type }}".toLowerCase()));
            console.log('update package');
            console.log(gitea);
            console.log('${{ inputs.type }}');
